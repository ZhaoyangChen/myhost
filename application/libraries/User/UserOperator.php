<?phpclass UserOperator {	public static function add($data, $defense = true) {		try {			if ($defense) {				if (!GeetestLib::pass($data['ip'], $data['geetest_challenge'], $data['geetest_validate'], $data['geetest_seccode'])) {					return [						'status' => 'fail',						'msg' => 'cannot pass geetest'					];				}			}			$user = new user();			$user->usr_nick = $data['nick'];			$user->usr_email = $data['email'];			$user->usr_role = user::GUEST;			$user->usr_psw = md5($data['password']);			$user->usr_reg_ip = $data['ip'];			$user->save();		} catch (Exception $e) {			return [				'status' => 'fail',				'msg' => $e->getMessage()			];		}		return [			'status' => 'success',			'msg' => ''		];	}	public static function login($data) {		$user = user::where('usr_email', $data['email'])->where('usr_psw', md5($data['password']))->get();		if ($user->count() == 1) {			session_start();			$_SESSION['user'] = $user[0]->usr_nick;			return [				'status' => 'success',				'msg' => 'OK'			];		} else {			return [				'status' => 'fail',				'msg' => 'cannot login'			];		}	}}